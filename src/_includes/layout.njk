<!doctype html>
<html lang="en" class="preload">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <script>
        (function(){
            var KEY='theme';
            var saved = localStorage.getItem(KEY);
            if(saved) {
                document.documentElement.setAttribute('data-theme', saved);
            } else {
                // brak wyboru - użyj systemowego
                var dark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
                document.documentElement.setAttribute('data-theme', dark ? 'dark' : 'light');
            }
        })();
    </script>

    <title>{{ title or "FM - Software Engineer" }}</title>
    <meta name="description" content="FM - software engineer. Minimal terminal-style personal site." />

    <link rel="icon" href='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><rect rx="8" width="64" height="64" fill="%23000"/><text x="50%" y="56%" text-anchor="middle" font-family="monospace" font-size="26" fill="white">FM</text></svg>' />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <link rel="stylesheet" href="/assets/css/layout.css">
    <link rel="stylesheet" href="/assets/css/boot.css">
    <link rel="stylesheet" href="/assets/css/loader.css">
    <link rel="stylesheet" href="/assets/css/gig.css">
    <link rel="stylesheet" href="/assets/css/md.css">
    <link rel="stylesheet" href="/assets/css/terminal.css">
    <link rel="stylesheet" href="/assets/css/transitions.css">
</head>

<body>
    <div class="wrap">

    <header>
    <a href="/" class="no-underline"><strong>FM</strong></a>
    <nav class="primary" aria-label="Primary navigation">
        <div class="primary-links">
            <a href="/">/me</a>
            <a href="/projects/">/projects</a>
            <a href="/blog/">/blog</a>
            <a href="/music/">/music</a>
            <a href="https://www.buymeacoffee.com/fmmaciej" target="_blank">/buy_me_a_coffee</a>
        </div>
        <button class="hamburger" id="hamburger" aria-controls="mobileDrawer" aria-expanded="false" aria-label="Open menu"><i class="fas fa-bars"></i></button>
        <span class="theme-toggle" id="themeToggle" title="Toggle theme" aria-label="Toggle theme"><i class="fas fa-moon"></i></span>
    </nav>
    <div style="clear:both"></div>
    </header>

    {% if terminalFile or terminal != false %}
        <div class="terminal-box" {% if terminalFile %} data-terminal="{{ terminalFile }}"{% endif %}>
            <div class="terminal-viewport">
                <div class="terminal-line">
                <span class="prompt">fm@void:~$</span><span class="cmd"><span id="typedText" class="typed"></span><span id="cursor" class="cursor"></span></span>
                </div>
            </div>
        </div>
    {% endif %}

    <div class="content-host">
        <main>
            {{ content | safe }}
        </main>
    </div>

    <footer>
        <div>© <span id="year"></span> FM - served plain & simple</div>
        <div class="social-icons">
            <a href="https://www.linkedin.com/in/organisciak-maciej/" title="LinkedIn" target="_blank" rel="noopener noreferrer">
                <i class="fab fa-linkedin"></i>
            </a>
            <a href="https://www.github.com/fmmaciej" title="Github" target="_blank" rel="noopener noreferrer">
                <i class="fab fa-github"></i>
            </a>
            <a href="https://stackoverflow.com/users/8387639/maciej-fm" title="Stack Overflow" target="_blank" rel="noopener noreferrer">
                <i class="fab fa-stack-overflow"></i>
            </a>
            <a href="https://instagram.com/fmmaciej" title="Instagram" target="_blank" rel="noopener noreferrer">
                <i class="fab fa-instagram"></i>
            </a>
            <a href="https://www.mixcloud.com/fmmaciej" title="MixCloud" target="_blank" rel="noopener noreferrer">
                <i class="fa-brands fa-mixcloud"></i>
            </a>
            <a href="https://www.soundcloud.com/fmmaciej" title="SoundCloud" target="_blank" rel="noopener noreferrer">
                <i class="fa-brands fa-soundcloud"></i>
            </a>
        </div>
    </footer>
    </div>

    <!-- Drawer + backdrop -->
    <div class="backdrop" id="backdrop" hidden></div>
    <aside class="drawer" id="mobileDrawer" aria-hidden="true" aria-label="Mobile menu">
        <header>
        <strong>Menu</strong>
        <button class="close" id="closeDrawer" aria-label="Close menu">×</button>
        </header>
        <nav>
            <a href="/">/me</a>
            <a href="/projects/">/projects</a>
            <a href="/blog/">/blog</a>
            <a href="/music/">/music</a>
            <a href="https://www.buymeacoffee.com/fmmaciej" target="_blank">/buy_me_a_coffee</a>
        </nav>
    </aside>

    <script src="/assets/js/boot.js" defer></script>
    <script src="/assets/js/loader.js" defer></script>
    <script src="/assets/js/theme.js" defer></script>
    <script src="/assets/js/nav.js" defer></script>
    <script src="/assets/js/page-boot.js" defer></script>
    <script src="/assets/js/terminal.js" defer></script>
    <script src="/assets/js/transitions.js" defer></script>

    <script>
        window.initTerminal && window.initTerminal(document);
        window.initNav && window.initNav(document);
    </script>

    <div id="pageLoader">
        <span>loading<span class="dots"></span></span>
    </div>

</body>
</html>
