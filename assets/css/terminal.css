/* ──────────────────────────────────────────────────────────
    Ustawienia globalne (ciemny/jaśniejszy motyw)
────────────────────────────────────────────────────────── */
:root{
    --terminal-opacity: .24;
    --overlay-bleed: 72px;
    --overlay-offset: 24px;
    --footer-height: 64px;
}

[data-theme="light"]{
    --terminal-opacity: 0.08;
}

/* ──────────────────────────────────────────────────────────
    Terminal (pasek z promptem + komenda)
────────────────────────────────────────────────────────── */
@keyframes blink{
    50%{
        opacity:0
    }
}

.terminal-box{
    --term-lines: 2;
}

.terminal-viewport{
  position: relative;
  height: calc(var(--term-lines) * 1.2em);   /* spójne z line-height */
  overflow: visible;                          /* pozwól „wystawać” */
}

/* Linia jest absolutna wewnątrz viewportu, więc overflow nie zmienia layoutu */
.terminal-line{
    position: absolute;
    inset: 0;
    display: flex;
    align-items: baseline;
    gap: .5ch;
    line-height: 1.4;
    font-size: 24px;
}

/* Prompt sztywny… */
.prompt{flex: 0 0 auto;
    color: var(--muted);
}

/* …komenda elastyczna i zawijalna */
.cmd{
    flex: 1 1 auto;
    min-width: 0;                 /* klucz do zawijania we flex */
    white-space: pre-wrap;        /* zawijaj */
    overflow-wrap: break-word;      /* łam także długie „słowa” */
    word-break: keep-all;     /* nie łam w środku "słów" */
}

/* typed/cursor dziedziczą zawijanie z .cmd */
#typedText{
    white-space: inherit;
    overflow-wrap: inherit;
}

#cursor{
    display:inline-block;
    width:0.6ch;           /* szerokość bloku kursora */
    height:1em;
    background:var(--cursor);
    vertical-align:baseline;
    transform:translateY(0.08em);
    animation:blink 1s step-start infinite;
}


/* ──────────────────────────────────────────────────────────
    Overlay z outputem (od końca terminala do stopki)
────────────────────────────────────────────────────────── */
.content-host{
    position:relative;
    isolation:isolate; /* własny stacking context, overlay pod treścią */
}

/* treść strony zawsze nad overlayem */
.content-host > *{ 
    position:relative;
    z-index:1;
}

/* warstwa overlay — zakładamy, że JS wstawia ją na początek .content-host
   i dynamicznie ustawia top tak, by startowała ZA terminalem */
.content-host .terminal-overlay{
    position:absolute;
    top:calc(-1 * var(--overlay-offset));
    bottom:var(--footer-height);
    left:calc(-1 * var(--overlay-bleed));
    right:calc(-1 * var(--overlay-bleed));
    pointer-events:none;
    background:transparent;
    color:var(--muted);
    white-space:pre-wrap;
    z-index:0;
}

/* wygląd tekstu outputu */
.content-host .terminal-overlay .layer{
    font-size:32px;
    font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono",monospace;
    line-height:1.6;
    opacity:var(--terminal-opacity);
}

/* ──────────────────────────────────────────────────────────
    Responsywność / preferencje
────────────────────────────────────────────────────────── */
@media (max-width:720px){
    :root{
        --overlay-bleed:16px;
    }

    .terminal-line{
        font-size: 18px;
    }

    .content-host .terminal-overlay .layer{
        opacity: .24;
    }
}
